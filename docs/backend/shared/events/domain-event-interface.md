# DomainEventInterface Specification

## Назначение

`DomainEventInterface` — базовый контракт для **доменных событий** в системе Aivalone.

Доменные события фиксируют **факты, произошедшие в доменной модели**, и используются для:

* оповещения других частей системы
* интеграции между контекстами
* построения Event-Driven и CQRS архитектуры

## Основные принципы доменных событий

* События **immutable**
* Именуются в прошедшем времени
* Отражают **факт**, а не намерение
* Не зависят от инфраструктуры
* Не знают, кто их слушает

## Контракт интерфейса

### getEventName(): string

Возвращает уникальное имя события.

Используется для:

* маршрутизации в EventBus
* логирования
* сериализации

Примеры значений:

* `user.registered`
* `user.tariffs.updated`
* `user.messengers.updated`

### getOccurredAt(): DateTimeImmutable

Возвращает дату и время, когда событие произошло.

Гарантии:

* значение устанавливается **один раз** при создании события
* не изменяется в течение жизненного цикла события

### getPayload(): array

Возвращает данные события в виде массива.

Требования:

* только сериализуемые данные
* без доменных объектов
* без ссылок на ORM / инфраструктуру

Payload используется:

* при передаче события между сервисами
* при публикации в очередь
* при логировании

## Архитектурные замечания

* Может использоваться как для синхронных, так и для асинхронных событий
* Подходит для дальнейшего event sourcing (при необходимости)

## Связанные документы

* [Shared Context Overview](../overview.md)
* [События](./overview.md)

## Статус

* [] Определён интерфейс `DomainEventInterface`
* [] Покрыт unit-тестами
