# Messenger Enum Specification

## Назначение

`Messenger` — доменный `enum`, описывающий **поддерживаемые мессенджеры** в системе Aivalone.

Используется для:

* унификации идентификаторов мессенджеров
* предотвращения использования «магических строк»
* валидации входных данных
* явного расширения списка поддерживаемых каналов

## Значения enum

| Значение | Код        | Описание                          |
| -------- | ---------- | --------------------------------- |
| TELEGRAM | `TELEGRAM` | Telegram                          |
| WHATSAPP | `WHATSAPP` | WhatsApp (планируется)            |
| DISCORD  | `DISCORD`  | Discord (планируется)             |
| VIBER    | `VIBER`    | Viber (планируется)               |

## Правила использования

* Во всех публичных API используется `Messenger`, а не `string`
* Сериализация / десериализация производится по `code`
* Хранение в БД — в виде строки (`VARCHAR`) либо `ENUM`

## Поведение enum

### fromCode(string $code): Messenger

Создает значение enum из строкового кода.

* Бросает [InvalidMessengerException](../exceptions/invalid-messenger-exception.md), если код не поддерживается
* Используется на границе системы (HTTP, Bot, Queue)

### code(): string

Возвращает строковый код мессенджера.

Используется:

* в событиях
* в сериализации
* при передаче между сервисами

## Инварианты

* Один `Messenger` однозначно определяет тип мессенджера
* Расширение списка происходит **только через добавление нового значения**
* Удаление значения допускается только через deprecated-период

## Связанные документы

* [Shared Context Overview](../overview.md)
* [Models](./overview.md)

## Статус

* [] Определён enum `Messenger`
